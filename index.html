<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contract Interaction</title>
    <script src="https://cdn.jsdelivr.net/npm/thirdweb@latest/dist/thirdweb.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        input, button {
            margin: 10px 0;
        }
        .error {
            color: red;
        }
    </style>
</head>
<body>

    <h1>Contract Interaction</h1>

    <div>
        <h2>Invest</h2>
        <input type="text" id="referrer" placeholder="Referrer Address" />
        <button id="investButton">Invest</button>
    </div>

    <div>
        <h2>Withdraw</h2>
        <button id="withdrawButton">Withdraw</button>
    </div>

    <p id="transactionHash"></p>
    <p id="error" class="error"></p>

    <script>
        let contract;
        let account;
        const client = createThirdwebClient({ clientId: 'YOUR_CLIENT_ID' }); // Default client ID

        // Function to initialize contract and account
        async function initialize(contractAddress, userAccount) {
            try {
                account = userAccount; // Set the user account
                contract = await client.getContract(contractAddress); // Initialize the contract

                document.getElementById('investButton').onclick = invest;
                document.getElementById('withdrawButton').onclick = withdraw;
            } catch (error) {
                console.error("Initialization failed:", error);
                document.getElementById('error').innerText = "Initialization failed: " + error.message;
            }
        }

        async function invest() {
            const referrer = document.getElementById('referrer').value;
            try {
                const transaction = await contract.call("invest", referrer);
                const transactionHash = transaction.hash;
                document.getElementById('transactionHash').innerText = "Transaction sent! Hash: " + transactionHash;
            } catch (error) {
                console.error("Investment transaction failed:", error);
                document.getElementById('error').innerText = "Investment transaction failed: " + error.message;
            }
        }

        async function withdraw() {
            try {
                const transaction = await contract.call("withdraw");
                const transactionHash = transaction.hash;
                document.getElementById('transactionHash').innerText = "Transaction sent! Hash: " + transactionHash;
            } catch (error) {
                console.error("Withdrawal transaction failed:", error);
                document.getElementById('error').innerText = "Withdrawal transaction failed: " + error.message;
            }
        }

        // Call the initialize function with your parameters
        window.onload = function() {
            const contractAddress = 'YOUR_CONTRACT_ADDRESS'; // Replace with your contract address
            const userAccount = 'YOUR_ACCOUNT_ADDRESS'; // Replace with the user's account address
            initialize(contractAddress, userAccount);
        };
    </script>

</body>
</html>
